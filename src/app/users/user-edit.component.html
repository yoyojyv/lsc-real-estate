<div class="container">

  <div class="page-header">
    <h2>{{userForm?.value?._id != null && userForm?.value?._id.length > 0 ? '유저 수정' : '유저 등록'}}</h2>
  </div>

  <form [formGroup]="userForm" class="form-horizontal">
    <input type="hidden" id="_id" formControlName="_id">

    <div class="row">
      <div class="col-xs-12 col-sm-8">
        <fieldset>

          <div class="form-group">
            <label for="username" class="col-md-2 control-label">아이디</label>
            <div class="col-md-10">
              <input type="text" class="form-control" id="username" formControlName="username" placeholder="아이디" [readonly]="userForm?.value?._id != null && userForm?.value?._id.length > 0">
            </div>

            <div *ngIf="formErrors.username">
              <div *ngFor="let errors of formErrors.username">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="password" class="col-md-2 control-label">패스워드 <span *ngIf="userForm?.value?._id != null && userForm?.value?._id.length > 0">(기본 Password 변경시에만 입력. 바꾸지 않으려면 빈칸)</span></label>
            <div class="col-md-10">
              <input type="password" class="form-control" id="password" formControlName="password" placeholder="패스워드">
            </div>

            <div *ngIf="formErrors.password">
              <div *ngFor="let errors of formErrors.password">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="name" class="col-md-2 control-label">이름</label>
            <div class="col-md-10">
              <input type="text" class="form-control" id="name" formControlName="name" placeholder="이름">
            </div>

            <div *ngIf="formErrors.name">
              <div *ngFor="let errors of formErrors.name">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="email" class="col-md-2 control-label">이메일</label>
            <div class="col-md-10">
              <input type="email" class="form-control" id="email" formControlName="email" placeholder="이메일">
            </div>

            <div *ngIf="formErrors.email">
              <div *ngFor="let errors of formErrors.email">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="mainPhone" class="col-md-2 control-label">대표전화</label>
            <div class="col-md-10">
              <input type="text" class="form-control" id="mainPhone" formControlName="mainPhone" placeholder="대표전화">
            </div>

            <div *ngIf="formErrors.mainPhone">
              <div *ngFor="let errors of formErrors.mainPhone">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="userPhone" class="col-md-2 control-label">담당전화</label>
            <div class="col-md-10">
              <input type="text" class="form-control" id="userPhone" formControlName="userPhone" placeholder="담당전화">
            </div>

            <div *ngIf="formErrors.userPhone">
              <div *ngFor="let errors of formErrors.userPhone">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

          <div class="form-group">
            <label for="role" class="col-md-2 control-label">권한</label>
            <div class="col-md-10">
              <select class="form-control" id="role" formControlName="role">
                <option value="user">일반유저</option>
                <option value="admin">관리자</option>
                <option value="super_admin">슈퍼 관리자</option>
              </select>
            </div>

            <div *ngIf="formErrors.role">
              <div *ngFor="let errors of formErrors.role">
                <p class="alert validate-alert">{{ errors }}
                <p>
              </div>
            </div>

          </div>

        </fieldset>
      </div>
    </div>

    <div class="button-group pull-right">
      <input type="button" class="btn btn-default" (click)="back()" value="뒤로" />
      <input type="button" class="btn btn-primary" (click)="saveUser()" value="저장" [disabled]="!userForm.valid"/>
    </div>

  </form>

</div>
